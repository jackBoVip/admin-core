/**
 * CSS 变量定义 - Tailwind CSS v4 优化版
 * @description 使用 @theme 指令和原生 CSS 特性
 *
 * Tailwind v4 特性利用：
 * - @theme 指令定义主题令牌（自动生成工具类）
 * - light-dark() 函数简化暗色模式
 * - CSS 原生嵌套
 * - color-mix() 动态颜色混合
 */

/* ========== Tailwind v4 @theme 主题定义 ========== */
/* 这些变量会自动映射为 Tailwind 工具类，如 bg-primary, text-foreground 等 */
@theme {
  /* 颜色 - 自动生成 bg-*, text-*, border-* 等工具类 */
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-primary-50: var(--primary-50);
  --color-primary-100: var(--primary-100);
  --color-primary-200: var(--primary-200);
  --color-primary-300: var(--primary-300);
  --color-primary-400: var(--primary-400);
  --color-primary-500: var(--primary-500);
  --color-primary-600: var(--primary-600);
  --color-primary-700: var(--primary-700);
  --color-primary-800: var(--primary-800);
  --color-primary-900: var(--primary-900);
  --color-primary-950: var(--primary-950);

  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-success: var(--success);
  --color-success-foreground: var(--success-foreground);
  --color-warning: var(--warning);
  --color-warning-foreground: var(--warning-foreground);
  --color-info: var(--info);
  --color-info-foreground: var(--info-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);

  /* 圆角 - 自动生成 rounded-* 工具类 */
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-DEFAULT: var(--radius);
  --radius-lg: calc(var(--radius) + 4px);
  --radius-xl: calc(var(--radius) + 8px);
  --radius-2xl: calc(var(--radius) + 16px);
  --radius-full: 9999px;

  /* 布局尺寸 - 自动生成 h-header, w-sidebar 等工具类 */
  --spacing-header: var(--admin-header-height);
  --spacing-footer: var(--admin-footer-height);
  --spacing-sidebar: var(--admin-sidebar-width);
  --spacing-sidebar-collapsed: var(--admin-sidebar-collapsed-width);
  --spacing-tabbar: var(--admin-tabbar-height);
  --spacing-content: var(--admin-content-padding);

  /* 动画时长 - 自动生成 duration-fast 等工具类 */
  --duration-fast: var(--admin-duration-fast);
  --duration-normal: var(--admin-duration-normal);
  --duration-slow: var(--admin-duration-slow);

  /* 缓动函数 */
  --ease-default: var(--admin-easing-default);
  --ease-in: var(--admin-easing-in);
  --ease-out: var(--admin-easing-out);

  /* Z-Index */
  --z-base: var(--admin-z-index-base);
  --z-dropdown: var(--admin-z-index-dropdown);
  --z-modal: var(--admin-z-index-modal);
  --z-popover: var(--admin-z-index-popover);
  --z-tooltip: var(--admin-z-index-tooltip);
  --z-toast: var(--admin-z-index-toast);
}

/* ========== 动态变量（由 JavaScript 控制） ========== */
:root {
  --radius: 8px;
  --font-scale: 1;
  --font-size-base: 16px;
  --menu-font-size: 14px;
}

/* 全局字体缩放 */
html {
  font-size: var(--font-size-base, 16px);
}

@layer admin-core {
  :root {
    /* ========== 主色调 - 默认蓝色 ========== */
    --primary: oklch(0.55 0.2 250);
    --primary-foreground: oklch(0.98 0 0);
    --primary-50: oklch(0.97 0.02 250);
    --primary-100: oklch(0.93 0.05 250);
    --primary-200: oklch(0.87 0.1 250);
    --primary-300: oklch(0.77 0.15 250);
    --primary-400: oklch(0.67 0.18 250);
    --primary-500: oklch(0.55 0.2 250);
    --primary-600: oklch(0.47 0.18 250);
    --primary-700: oklch(0.39 0.16 250);
    --primary-800: oklch(0.31 0.13 250);
    --primary-900: oklch(0.23 0.1 250);
    --primary-950: oklch(0.15 0.08 250);

    /* ========== 语义色（由 JS 从主色派生） ========== */
    --success: oklch(0.6 0.18 145);
    --success-foreground: oklch(0.1 0 0);
    --warning: oklch(0.7 0.16 85);
    --warning-foreground: oklch(0.1 0 0);
    --destructive: oklch(0.55 0.22 25);
    --destructive-foreground: oklch(0.98 0 0);
    --info: oklch(0.55 0.18 220);
    --info-foreground: oklch(0.98 0 0);

    /* ========== 中性色 - 使用 light-dark() 函数 ========== */
    --background: light-dark(oklch(1 0 0), oklch(0.13 0.02 250));
    --foreground: light-dark(oklch(0.1 0.02 250), oklch(0.98 0 0));
    --muted: light-dark(oklch(0.96 0.01 250), oklch(0.2 0.02 250));
    --muted-foreground: light-dark(oklch(0.45 0.02 250), oklch(0.65 0.02 250));
    --accent: light-dark(oklch(0.96 0.01 250), oklch(0.2 0.02 250));
    --accent-foreground: light-dark(oklch(0.15 0.02 250), oklch(0.98 0 0));

    /* ========== 边框和输入框 ========== */
    --border: light-dark(oklch(0.9 0.01 250), oklch(0.25 0.02 250));
    --input: light-dark(oklch(0.9 0.01 250), oklch(0.25 0.02 250));
    --ring: var(--primary);

    /* ========== 卡片和弹出层 ========== */
    --card: light-dark(oklch(1 0 0), oklch(0.15 0.02 250));
    --card-foreground: var(--foreground);
    --popover: light-dark(oklch(1 0 0), oklch(0.15 0.02 250));
    --popover-foreground: var(--foreground);

    /* ========== 次要色 ========== */
    --secondary: var(--muted);
    --secondary-foreground: var(--foreground);

    /* ========== 布局尺寸 ========== */
    --admin-header-height: 50px;
    --admin-footer-height: 32px;
    --admin-sidebar-width: 224px;
    --admin-sidebar-collapsed-width: 60px;
    --admin-tabbar-height: 38px;
    --admin-content-padding: 16px;

    /* ========== 动画变量 ========== */
    --admin-duration-fast: 150ms;
    --admin-duration-normal: 300ms;
    --admin-duration-slow: 500ms;
    --admin-easing-default: cubic-bezier(0.4, 0, 0.2, 1);
    --admin-easing-in: cubic-bezier(0.4, 0, 1, 1);
    --admin-easing-out: cubic-bezier(0, 0, 0.2, 1);

    /* ========== z-index 变量 ========== */
    --admin-z-index-base: 200;
    --admin-z-index-dropdown: 1000;
    --admin-z-index-modal: 1050;
    --admin-z-index-popover: 1060;
    --admin-z-index-tooltip: 1070;
    --admin-z-index-toast: 1080;

    /* ========== 启用 light-dark() 函数所需的 color-scheme ========== */
    color-scheme: light dark;
  }

  /* 显式暗色模式覆盖（当 light-dark() 不生效时的降级方案） */
  .dark {
    --background: oklch(0.13 0.02 250);
    --foreground: oklch(0.98 0 0);
    --muted: oklch(0.2 0.02 250);
    --muted-foreground: oklch(0.65 0.02 250);
    --accent: oklch(0.2 0.02 250);
    --accent-foreground: oklch(0.98 0 0);
    --border: oklch(0.25 0.02 250);
    --input: oklch(0.25 0.02 250);
    --card: oklch(0.15 0.02 250);
    --popover: oklch(0.15 0.02 250);
    --secondary: oklch(0.2 0.02 250);
    --secondary-foreground: oklch(0.98 0 0);
  }
}
