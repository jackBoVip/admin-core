/**
 * Animation Styles - Tailwind CSS v4 优化版
 * @description Vue/React 页面过渡动画和工具类
 *
 * 设计原则：
 * - 基础关键帧由 Tailwind 预设定义，这里只定义 Vue/React 过渡类
 * - 使用 CSS 变量控制动画时长和缓动
 * - 使用 CSS 嵌套简化代码
 */

/* ========== Vue/React 过渡动画类 ========== */

/* Fade - 淡入淡出 */
.fade-enter-active,
.fade-leave-active {
  transition: opacity var(--admin-page-transition-duration, var(--admin-duration-normal, 300ms))
    var(--admin-easing-default);
}

.fade-enter-active {
  animation: admin-fade var(--admin-page-transition-duration, var(--admin-duration-normal, 300ms))
    var(--admin-easing-default, cubic-bezier(0.4, 0, 0.2, 1)) both;
}

.fade-enter-from,
.fade-leave-to {
  opacity: 0;
}

/* Fade Slide - 淡入滑动 */
.fade-slide-enter-active,
.fade-slide-leave-active {
  transition:
    opacity var(--admin-page-transition-duration, var(--admin-duration-normal, 300ms)) var(--admin-easing-default),
    transform var(--admin-page-transition-duration, var(--admin-duration-normal, 300ms)) var(--admin-easing-default);
}

.fade-slide-enter-active {
  animation: admin-fade-slide var(--admin-page-transition-duration, var(--admin-duration-normal, 300ms))
    var(--admin-easing-default, cubic-bezier(0.4, 0, 0.2, 1)) both;
}

.fade-slide-enter-from {
  opacity: 0;
  transform: translateX(10px);
}

.fade-slide-leave-to {
  opacity: 0;
  transform: translateX(-10px);
}

/* Fade Up - 淡入上滑 */
.fade-up-enter-active,
.fade-up-leave-active {
  transition:
    opacity var(--admin-page-transition-duration, var(--admin-duration-normal, 300ms)) var(--admin-easing-default),
    transform var(--admin-page-transition-duration, var(--admin-duration-normal, 300ms)) var(--admin-easing-default);
}

.fade-up-enter-active {
  animation: admin-fade-up var(--admin-page-transition-duration, var(--admin-duration-normal, 300ms))
    var(--admin-easing-default, cubic-bezier(0.4, 0, 0.2, 1)) both;
}

.fade-up-enter-from {
  opacity: 0;
  transform: translateY(10px);
}

.fade-up-leave-to {
  opacity: 0;
  transform: translateY(-10px);
}

/* Fade Down - 淡入下滑 */
.fade-down-enter-active,
.fade-down-leave-active {
  transition:
    opacity var(--admin-page-transition-duration, var(--admin-duration-normal, 300ms)) var(--admin-easing-default),
    transform var(--admin-page-transition-duration, var(--admin-duration-normal, 300ms)) var(--admin-easing-default);
}

.fade-down-enter-active {
  animation: admin-fade-down var(--admin-page-transition-duration, var(--admin-duration-normal, 300ms))
    var(--admin-easing-default, cubic-bezier(0.4, 0, 0.2, 1)) both;
}

.fade-down-enter-from {
  opacity: 0;
  transform: translateY(-10px);
}

.fade-down-leave-to {
  opacity: 0;
  transform: translateY(10px);
}

/* Slide Left/Right - 滑动 */
.slide-left-enter-active,
.slide-left-leave-active,
.slide-right-enter-active,
.slide-right-leave-active {
  transition: transform var(--admin-page-transition-duration, var(--admin-duration-normal, 300ms))
    var(--admin-easing-default);
}

.slide-left-enter-active {
  animation: admin-slide-left var(--admin-page-transition-duration, var(--admin-duration-normal, 300ms))
    var(--admin-easing-default, cubic-bezier(0.4, 0, 0.2, 1)) both;
}

.slide-right-enter-active {
  animation: admin-slide-right var(--admin-page-transition-duration, var(--admin-duration-normal, 300ms))
    var(--admin-easing-default, cubic-bezier(0.4, 0, 0.2, 1)) both;
}

.slide-left-enter-from { transform: translateX(100%); }
.slide-left-leave-to { transform: translateX(-100%); }
.slide-right-enter-from { transform: translateX(-100%); }
.slide-right-leave-to { transform: translateX(100%); }

/* Scale - 缩放 */
.scale-enter-active,
.scale-leave-active {
  transition:
    opacity var(--admin-duration-fast) var(--admin-easing-default),
    transform var(--admin-duration-fast) var(--admin-easing-default);
}

.scale-enter-from,
.scale-leave-to {
  opacity: 0;
  transform: scale(0.95);
}

/* Expand/Collapse - 展开/折叠（使用 max-height 替代 height 避免重排） */
.expand-enter-active,
.expand-leave-active {
  transition:
    max-height var(--admin-duration-normal) var(--admin-easing-default),
    opacity var(--admin-duration-normal) var(--admin-easing-default);
  overflow: hidden;
  max-height: 500px; /* 足够大的值 */
}

.expand-enter-from,
.expand-leave-to {
  max-height: 0;
  opacity: 0;
}

/* ========== 使用 @utility 定义动画工具类 ========== */

/* 骨架屏闪烁效果 - 使用伪元素配合 transform 提升性能 */
@utility animate-shimmer {
  position: relative;
  overflow: hidden;

  &::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(
      90deg,
      transparent 0%,
      var(--muted) 50%,
      transparent 100%
    );
    animation: shimmer 2s infinite;
  }
}

/* ========== 关键帧定义 ========== */
/* shimmer 使用 transform 替代 background-position 提升性能 */
@keyframes shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

@keyframes admin-fade {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes admin-fade-slide {
  from { opacity: 0; transform: translateX(10px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes admin-fade-up {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes admin-fade-down {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes admin-slide-left {
  from { transform: translateX(100%); }
  to { transform: translateX(0); }
}

@keyframes admin-slide-right {
  from { transform: translateX(-100%); }
  to { transform: translateX(0); }
}

@media (prefers-reduced-motion: reduce) {
  .fade-enter-active,
  .fade-leave-active,
  .fade-slide-enter-active,
  .fade-slide-leave-active,
  .fade-up-enter-active,
  .fade-up-leave-active,
  .fade-down-enter-active,
  .fade-down-leave-active,
  .slide-left-enter-active,
  .slide-left-leave-active,
  .slide-right-enter-active,
  .slide-right-leave-active,
  .scale-enter-active,
  .scale-leave-active,
  .expand-enter-active,
  .expand-leave-active,
  .animate-shimmer::after {
    transition: none;
    animation: none;
  }
}
