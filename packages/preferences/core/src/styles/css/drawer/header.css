/**
 * Drawer Header Styles - Tailwind CSS v4 优化版
 * @description Title, description, action buttons
 *
 * Tailwind v4 特性利用：
 * - CSS 原生嵌套
 * - 容器查询响应式
 */

@layer admin-core {
  /* ========== 头部容器 ========== */
  .preferences-drawer-header {
    position: relative;
    z-index: 10;
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-shrink: 0;
    padding: 16px 24px;
    border-bottom: 1px solid var(--border);
    overflow: visible;

    /* 容器查询 - 窄屏时调整内边距 */
    @container drawer (max-width: 360px) {
      padding: 12px 16px;
    }
  }

  /* ========== 标题区域 ========== */
  .preferences-drawer-title-wrapper {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }

  .preferences-drawer-title {
    font-size: 16px;
    font-weight: 600;
    color: var(--foreground);

    @container drawer (max-width: 360px) {
      font-size: 15px;
    }
  }

  .preferences-drawer-description {
    font-size: 12px;
    color: var(--muted-foreground);

    /* 窄屏时隐藏描述 */
    @container drawer (max-width: 320px) {
      display: none;
    }
  }

  /* ========== 操作按钮区域 ========== */
  .preferences-drawer-actions {
    position: relative;
    z-index: 11;
    display: flex;
    align-items: center;
    gap: 4px;
    overflow: visible;
  }

  /* ========== 图标按钮 ========== */
  .preferences-btn-icon {
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    padding: 0;
    background: transparent;
    border: none;
    border-radius: var(--radius, 8px);
    cursor: pointer;
    color: var(--muted-foreground);
    /* 明确指定过渡属性，避免 transition: all 的性能问题 */
    transition: 
      color var(--admin-duration-fast) var(--admin-easing-default),
      background-color var(--admin-duration-fast) var(--admin-easing-default),
      transform var(--admin-duration-fast) var(--admin-easing-default),
      opacity var(--admin-duration-fast) var(--admin-easing-default);
    overflow: visible;

    /* 悬停时提升 z-index */
    &:hover {
      z-index: 100;

      &:not(:disabled):not([data-disabled="true"]) {
        color: var(--foreground);
        background: var(--muted);
        transform: scale(1.05);
      }
    }

    &:active:not(:disabled):not([data-disabled="true"]) {
      transform: scale(0.95);
    }

    &:focus-visible {
      outline: 2px solid var(--ring);
      outline-offset: 2px;
    }

    &:disabled,
    &[data-disabled="true"] {
      cursor: not-allowed;
      opacity: 0.3;
    }

    svg {
      width: 18px;
      height: 18px;
    }

    /* 红点指示器 */
    .dot {
      position: absolute;
      top: 6px;
      right: 6px;
      width: 6px;
      height: 6px;
      background: var(--destructive);
      border: 1.5px solid var(--background);
      border-radius: 9999px;
    }

    /* 相对定位辅助类 */
    &.relative {
      position: relative;
    }
  }

  /* ========== 关闭按钮 ========== */
  .preferences-drawer-close {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    padding: 0;
    background: transparent;
    border: none;
    border-radius: var(--radius, 8px);
    cursor: pointer;
    color: var(--muted-foreground);
    transition: 
      color var(--admin-duration-fast) ease,
      background-color var(--admin-duration-fast) ease;

    &:hover {
      color: var(--foreground);
      background: var(--accent);
    }

    &:focus-visible {
      outline: 2px solid var(--ring);
      outline-offset: 2px;
    }

    svg {
      width: 16px;
      height: 16px;
    }
  }
}
