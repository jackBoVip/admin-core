/**
 * Utility Styles - Tailwind CSS v4 优化版
 * @description 使用 @utility 指令创建自定义工具类
 *
 * Tailwind v4 特性利用：
 * - @utility 指令定义自定义工具类
 * - CSS 原生嵌套
 * - 自动与 Tailwind 工具类系统集成
 */

/* ========== 自定义工具类（使用 @utility 指令） ========== */

/* 滚动条样式 - 可通过 Tailwind 类使用，如 class="scrollbar-thin" */
@utility scrollbar-thin {
  scrollbar-width: thin;
  scrollbar-color: var(--muted-foreground) transparent;

  &::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  &::-webkit-scrollbar-track {
    background: transparent;
  }

  &::-webkit-scrollbar-thumb {
    background: var(--muted-foreground);
    border-radius: 3px;

    &:hover {
      background: var(--foreground);
    }
  }
}

@utility scrollbar-none {
  scrollbar-width: none;
  -ms-overflow-style: none;

  &::-webkit-scrollbar {
    display: none;
  }
}

/* 灰色模式（哀悼模式） */
@utility grayscale-mode {
  filter: grayscale(100%);
}

/* 色弱模式（无障碍） */
@utility color-weak-mode {
  filter: invert(80%);
}

/* 禁止选择 */
@utility no-select {
  user-select: none;
}

/* 焦点可见环 */
@utility focus-ring {
  &:focus-visible {
    outline: 2px solid var(--ring);
    outline-offset: 2px;
  }
}

/* 半深色模式 */
@utility semi-dark {
  --background: oklch(0.18 0.02 250);
  --foreground: oklch(0.92 0 0);
  --muted: oklch(0.22 0.02 250);
  --muted-foreground: oklch(0.6 0.02 250);
  --border: oklch(0.28 0.02 250);
}

/* ========== @layer 内的补充样式 ========== */
@layer admin-core {
  /* 全局模式应用到 html */
  html {
    &.grayscale-mode {
      filter: grayscale(100%);
    }

    &.color-weak-mode {
      filter: invert(80%);
    }
  }

  /* 文本截断工具类（Tailwind 已有，这里作为降级） */
  .truncate {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* 过渡工具类（使用 CSS 变量） */
  .transition-colors {
    transition-property: color, background-color, border-color;
    transition-duration: var(--admin-duration-fast);
    transition-timing-function: var(--admin-easing-default);
  }

  .transition-opacity {
    transition-property: opacity;
    transition-duration: var(--admin-duration-fast);
    transition-timing-function: var(--admin-easing-default);
  }

  .transition-transform {
    transition-property: transform;
    transition-duration: var(--admin-duration-fast);
    transition-timing-function: var(--admin-easing-default);
  }
}
